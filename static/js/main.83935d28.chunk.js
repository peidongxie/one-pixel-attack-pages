(this["webpackJsonpone-pixel-attack-web"]=this["webpackJsonpone-pixel-attack-web"]||[]).push([[0],{151:function(e,t,a){e.exports=a.p+"static/media/logo.46317b39.svg"},152:function(e,t,a){e.exports=a.p+"static/media/title.a61131cf.svg"},153:function(e,t,a){e.exports=a.p+"static/media/github.17540508.svg"},172:function(e,t,a){e.exports=a(386)},177:function(e,t,a){},180:function(e,t,a){},187:function(e,t,a){},235:function(e,t,a){},255:function(e,t,a){},342:function(e,t,a){},384:function(e,t,a){},385:function(e,t,a){},386:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),r=a(8),o=a.n(r),c=(a(177),a(178),a(64)),l=a(27),s=a(28),u=a(30),h=a(29),p=a(16),m=a(31),f=a(151),d=a.n(f),g=a(152),b=a.n(g),v=a(153),C=a.n(v);a(180);var w=function(){return i.a.createElement("div",{id:"navigation-bar"},i.a.createElement("img",{alt:"logo",id:"logo",src:d.a}),i.a.createElement("img",{alt:"title",id:"title",src:b.a}),i.a.createElement("a",{href:"https://github.com/peidongxie",rel:"noopener noreferrer",target:"_blank"},i.a.createElement("img",{alt:"github",id:"github",src:C.a})))},E=(a(110),a(82)),y=(a(111),a(77)),j=(a(387),a(37)),k=(a(112),a(47)),O=(a(113),a(81)),x=(a(187),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={switch:-1===e.value,input:e.value<0?0:e.value},a.onChangeInput=a.onChangeInput.bind(Object(p.a)(a)),a.onChangeSwitch=a.onChangeSwitch.bind(Object(p.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"onChangeInput",value:function(e){"number"===typeof e&&((e=parseInt(e))>=0&&this.setState({input:e}),this.props.onChange(e))}},{key:"onChangeSwitch",value:function(e){this.setState({switch:e}),this.props.onChange(e?-1:this.state.input)}},{key:"render",value:function(){return i.a.createElement("span",{className:"switch-with-input"},i.a.createElement(O.a,{disabled:this.state.switch,min:0,onChange:this.onChangeInput,value:this.state.input}),i.a.createElement(y.a,{checkedChildren:"\u9ed8\u8ba4\u503c",defaultChecked:-1===this.props.value,onChange:this.onChangeSwitch,unCheckedChildren:"\u81ea\u5b9a\u4e49"}))}}]),t}(i.a.Component)),I=(a(232),a(167)),S=(a(235),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).onChange=a.onChange.bind(Object(p.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"onChange",value:function(e){"number"===typeof e&&(e=parseInt(e))<=this.props.max&&e>=this.props.min&&this.props.onChange(e)}},{key:"render",value:function(){return i.a.createElement("span",{className:"slider-with-input"},i.a.createElement(O.a,{max:this.props.max,min:this.props.min,onChange:this.onChange,value:this.props.value}),i.a.createElement(I.a,{max:this.props.max,min:this.props.min,onChange:this.onChange,value:this.props.value}))}}]),t}(i.a.Component)),F=(a(388),a(166)),N=(a(255),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={fileList:[]},a.beforeUpload=a.beforeUpload.bind(Object(p.a)(a)),a.onChange=a.onChange.bind(Object(p.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"beforeUpload",value:function(e){if(e.size>(1<<20)*this.props.size)return k.a.error("\u6587\u4ef6\u4e0d\u5f97\u5927\u4e8e".concat(this.props.size,"MB")),!1}},{key:"onChange",value:function(e){switch(e.file.status){case"done":k.a.success("\u6a21\u578b\u4e0a\u4f20\u6210\u529f"),this.props.onChange(e.file.response.name);break;case"error":k.a.error("\u6a21\u578b\u4e0a\u4f20\u5931\u8d25");break;case"removed":k.a.info("\u6a21\u578b\u79fb\u9664\u6210\u529f"),this.props.onChange("")}this.setState({fileList:e.fileList.slice(-1)})}},{key:"render",value:function(){return i.a.createElement(F.a,{accept:this.props.accept,action:this.props.action,beforeUpload:this.beforeUpload,fileList:this.state.fileList,onChange:this.onChange,className:"upload-button"},i.a.createElement(E.a,{icon:"upload"},this.props.button),i.a.createElement("small",null,this.props.text))}}]),t}(i.a.Component)),A=a(63),D=a.n(A),L=a(109),P="https://api.peaceandlove.top:50001",R=function(){var e=Object(L.a)(D.a.mark((function e(t,a){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(P+t,a);case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),U=function(){var e=Object(L.a)(D.a.mark((function e(t,a){var n,i;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,a){t((function(t,n){null===t?e(n):a(t)}))}));case 2:return n=e.sent,e.next=5,R("/attack",{body:JSON.stringify(n),method:"POST",mode:"cors"});case 5:(i=e.sent).success&&a(i);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),W=(a(342),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={loading:!1},a.submit=a.submit.bind(Object(p.a)(a)),a.onChange=e.onChange,a.getFieldDecorator=e.form.getFieldDecorator,a.validateFields=e.form.validateFields,a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"submit",value:function(e){var t=this;e.preventDefault(),this.setState({loading:!0}),U(this.validateFields,this.onChange).catch((function(){k.a.info("\u670d\u52a1\u5668\u7f62\u5de5\u5566")})).finally((function(){t.setState({loading:!1})}))}},{key:"render",value:function(){return i.a.createElement(j.a,{labelCol:{xs:{span:5,offset:1},sm:{span:4,offset:2},md:{span:3,offset:3}},wrapperCol:{xs:17,sm:16,md:15},onSubmit:this.submit,id:"form"},i.a.createElement(j.a.Item,{label:"\u56fe\u50cf"},this.getFieldDecorator("image",{initialValue:"",valuePropName:"value"})(i.a.createElement(N,{accept:".npy,.png",action:P+"/file",button:"\u4e0a\u4f20(.npy/.png)",size:.5,text:"\u9ed8\u8ba4\u4e3aCIFAR10\u968f\u673a\u56fe"}))),i.a.createElement(j.a.Item,{label:"\u6a21\u578b"},this.getFieldDecorator("model",{initialValue:"",valuePropName:"value"})(i.a.createElement(N,{accept:".h5",action:P+"/file",button:"\u4e0a\u4f20(.h5)",size:5,text:"\u9ed8\u8ba4\u4e3aCIFAR10-CNN\u6a21\u578b"}))),i.a.createElement(j.a.Item,{label:"\u6807\u7b7e"},this.getFieldDecorator("label",{initialValue:-1,valuePropName:"value"})(i.a.createElement(x,null))),i.a.createElement(j.a.Item,{label:"\u6270\u52a8\u50cf\u7d20\u6570"},this.getFieldDecorator("count",{initialValue:10,valuePropName:"value"})(i.a.createElement(S,{min:0,max:20}))),i.a.createElement(j.a.Item,{label:"\u6a21\u578b\u89c4\u4e00\u5316"},this.getFieldDecorator("normalized",{initialValue:!0,valuePropName:"checked"})(i.a.createElement(y.a,null))),i.a.createElement(j.a.Item,{wrapperCol:{span:6,offset:6}},i.a.createElement(E.a,{htmlType:"submit",type:"danger",icon:"block",loading:this.state.loading,className:"submit"},"Attack")))}}]),t}(i.a.Component)),z=j.a.create({name:"form"})(W),B=(a(380),a(170)),T=(a(382),a(169)),V=a(168),M=a(48),J=(a(384),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={height:210},a.fillCanvas=a.fillCanvas.bind(Object(p.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=function(){e.setState({height:(document.getElementById("chart").clientWidth-60)/2})};window.onresize=t,t(),this.fillCanvas()}},{key:"componentDidUpdate",value:function(e,t,a){this.fillCanvas()}},{key:"fillCanvas",value:function(){var e=this.props.result;if(e.success){var t=new Image;t.src=e.image,t.onload=function(){var a=e.width,n=e.height,i=document.getElementById("before"),r=document.createElement("canvas"),o=document.getElementById("after"),c=i.getContext("2d"),l=r.getContext("2d"),s=o.getContext("2d");c.imageSmoothingEnabled=!1,c.drawImage(t,0,0,a,n,0,0,i.width,i.offsetHeight),l.drawImage(t,0,0);var u=l.getImageData(0,0,a,n),h=u.data,p=!0,m=!1,f=void 0;try{for(var d,g=e.change[Symbol.iterator]();!(p=(d=g.next()).done);p=!0){var b=d.value,v=b.x,C=b.y,w=b.value,E=a*v+C<<2,y=Object(V.a)(w,3),j=y[0],k=y[1],O=y[2];h[E]=j,h[E+1]=k,h[E+2]=O}}catch(x){m=!0,f=x}finally{try{p||null==g.return||g.return()}finally{if(m)throw f}}l.putImageData(u,0,0),s.imageSmoothingEnabled=!1,s.drawImage(r,0,0,a,n,0,0,o.width,o.height)}}}},{key:"isRealLabel",value:function(e,t){var a=e[t],n=!0,i=!1,r=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){if(o.value>a)return!1}}catch(l){i=!0,r=l}finally{try{n||null==c.return||c.return()}finally{if(i)throw r}}return!0}},{key:"render",value:function(){var e=this.props.result;if(!e.success)return i.a.createElement("div",{id:"chart"},i.a.createElement(T.a,null));var t,a,n,r=e.width,o=e.height,c=Math.floor(160/r),l=r*c,s=o*c,u=e.label,h=e.before,p=e.after;this.isRealLabel(h,u)?this.isRealLabel(p,u)?(t="Failed Attack",a="\u4f46\u672a\u80fd\u5e72\u6270\u6a21\u578b\u7684\u9884\u6d4b\u7ed3\u679c",n="error"):(t="Successful Attack",a="\u4e14\u6539\u53d8\u4e86\u6a21\u578b\u7684\u9884\u6d4b\u7ed3\u679c",n="success"):(t="Bad Model",a="\u4f46\u6a21\u578b\u672a\u88ab\u5e72\u6270\u7684\u9884\u6d4b\u4e0e\u6807\u7b7e\u4e0d\u76f8\u7b26",n="info");for(var m=e.change.length,f=[],d=0;d<h.length;d++)f.push({name:"before",label:d.toString(),percent:h[d]/10});for(var g=0;g<p.length;g++)f.push({name:"after",label:g.toString(),percent:p[g]/10});return i.a.createElement("div",{id:"chart"},i.a.createElement("div",{id:"comparison"},i.a.createElement("canvas",{height:s+"px",id:"before",width:l+"px"}),i.a.createElement("canvas",{height:s+"px",id:"after",width:l+"px"})),i.a.createElement(B.a,{description:"\u653b\u51fb\u4e86"+r+"x"+o+"\u56fe\u50cf\u7684"+m+"\u4e2a\u50cf\u7d20"+a,message:t,showIcon:!0,type:n,id:"alert"}),i.a.createElement(M.Chart,{data:f,forceFit:!0,height:this.state.height},i.a.createElement(M.Axis,{name:"label"}),i.a.createElement(M.Axis,{name:"percent"}),i.a.createElement(M.Geom,{adjust:[{type:"dodge",marginRatio:0}],color:"name",position:"label*percent",type:"interval"}),i.a.createElement(M.Legend,null),i.a.createElement(M.Tooltip,null)))}}]),t}(i.a.Component)),H=(a(385),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={result:{image:"",width:0,height:0,label:0,before:[],change:[],after:[],success:!1}},a.onChange=a.onChange.bind(Object(p.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"onChange",value:function(e){this.setState({result:e})}},{key:"render",value:function(){return i.a.createElement(c.a,null,i.a.createElement(c.a.Header,null,i.a.createElement(w,null)),i.a.createElement(c.a.Content,null,i.a.createElement(z,{onChange:this.onChange}),i.a.createElement(J,{result:this.state.result})),i.a.createElement(c.a.Footer,null,"Copyright \xa9 2020 Peidong Xie"))}}]),t}(i.a.Component)),G=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function X(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(i.a.createElement(H,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");G?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):X(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):X(t,e)}))}}()}},[[172,1,2]]]);
//# sourceMappingURL=main.83935d28.chunk.js.map